env:
  global:
    - secure: JHlyQu0WosZADuA9iNqMpNjxXFFUr/q0+yHJhOk378ILLDNsB/WkzDn/oau2gIApW6kNOPB/dNw9JJAHWKiqlebU1mlOELQzlevHK3ELpVXn5aCArducw4NBA6PFrQTKVcoUw4EsZaYV6ggtZrG9w8g1JSQVvz1ZjddafbIvC4n/Wq70GAYyq+BkMgO3r9qKblCZIHEXXphZp8+uRqa/nXOG6MEX5RJnB0FEf1+hBnuOz9OCyu//+Hgsd55fnaVX5EJfhALkIrOf8czjB0lWQ+aD4lb0YSPJwJdRDuHu1BSOozT1xaylWRGoy8tuuTEUJgrvuBfLOsgT8Q2m/4rOVisCIJKI4Cv7dhZMI4GL07xvcYh9KJrn7u2DIFruvf4vJm3yJFwoWpBb9WvEvgHPxYePOK2iK+Mc8h4m8KboYTToY1nZsazMYZe0fVdbsXSszzAI4qJJmk8G042dYZxWlC6kvqA7jSl+Sdxp8+IVtLM7KQF71bpNIV/svD0pKwr7hzjI8DuzBlyBQa4HFkS1aDsbrZeD1Mx9h6Al48yAT1NxjmogK20ZJdp05FEJpw4pdj3mw9vFpldoD3cZ7FS6T3pBV6DvUA8DjaNk0zgY+hMi9+IHqAfPTpvjIDcxJCz1Q4rdLomE9i6jl3hMmEmQ8/GcUW2ABPtc41V25kUw3fQ=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hosts_web_yoyo.org
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
